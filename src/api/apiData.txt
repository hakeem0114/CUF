//API imports
import * as cheerio from 'cheerio'; //handle web scrapping
import axios from 'axios'; //Handle http requests


/*****API RETRIVAL***/

export default async function scrapedData(){
    try{

            console.log('Api Data')

            //main arr to return 
            const universities = []

            //Async GET req from url
            const url = 'https://www.ontariouniversitiesinfo.ca/universities'
            const response = await axios.get(url)

            //Put reponse into cheerio $ object
            const $ = await cheerio.fromURL(response)

            //Get container for all universities
            $('.university').each((index, element)=>{

                const universityId = index

                const universityName = $(element).find('.university-name').text()

                const universityMainBranch = $(element).find('.university-meta.a:first').text()
                const universityMainBranchPrograms = $(element).find('.university-meta.a:first').next().text()
                
                const universityAffiliateBranch = $(element).find('affiliate.university-meta.a:first').text()
                const universityAffiliateBranchPrograms  = $(element).find('affiliate.university-meta.a:first').next().text()

                universities.push({
                    universityId,
                    universityName,
                    universityMainBranch,
                    universityMainBranchPrograms,
                    universityAffiliateBranch,
                    universityAffiliateBranchPrograms,
                })
            })
           //console.log(JSON.stringify(universities))
           // return  universities
            
    }
    catch(error){
        console.log(error)
    }

}

// scrapedData()
// console.log('Test')




